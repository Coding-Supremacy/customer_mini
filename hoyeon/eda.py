import streamlit as st
import os
import pandas as pd
import plotly.express as px
import plotly.colors as pc
from streamlit_option_menu import option_menu
from streamlit_autorefresh import st_autorefresh

# 10ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨ (10000 ë°€ë¦¬ì´ˆ)
st_autorefresh(interval=10000, limit=None, key="fizzbuzz")

# ì¸í¬ ë©”ì‹œì§€ë¥¼ ì„¸ë°€í•˜ê²Œ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
def custom_info(message, bg_color, text_color="black"):
    st.markdown(
        f'<div style="background-color: {bg_color}; color: {text_color}; padding: 10px; border-radius: 4px; margin-bottom: 10px;">{message}</div>',
        unsafe_allow_html=True
    )

# ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì„¤ì •


# ë©”ë‰´ ìƒì„± (ë¶„ì„ ì¢…ë¥˜ ì„ íƒ)
selected = option_menu(
    menu_title=None,
    options=[
        "ğŸ“Š ê°€ì… ì—°ë„ ë¶„ì„",
        "ğŸ’° ê±°ë˜ ê¸ˆì•¡ ë¶„ì„",
        "ğŸ›’ êµ¬ë§¤ ë¹ˆë„ ë¶„ì„",
        "ğŸ“ˆ í´ëŸ¬ìŠ¤í„°ë§ ë¶„ì„",
        "ğŸŒ ì§€ì—­ë³„ êµ¬ë§¤ ë¶„ì„"
    ],
    icons=["calendar", "cash", "cart", "graph-up", "globe"],
    menu_icon="cast",
    default_index=0,
    orientation="horizontal",
    styles={
        "container": {"padding": "0!important", "background-color": "#f9f9f9"},
        "icon": {"color": "#2E86C1", "font-size": "20px"},
        "nav-link": {"font-size": "16px", "text-align": "center", "margin": "0px", "padding": "10px"},
        "nav-link-selected": {"background-color": "#2E86C1", "color": "white"},
    }
)

pastel_colors = pc.qualitative.Pastel

# CSV íŒŒì¼ ê²½ë¡œ (ê° ì„¹ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” CSV íŒŒì¼ ê²½ë¡œ, í•„ìš”ì— ë”°ë¼ ìˆ˜ì •)
csv_path = r"D:\customer_mini\data\í´ëŸ¬ìŠ¤í„°ë§ê³ ê°ë°ì´í„°_5.csv"

# 1) ê°€ì… ì—°ë„ ë¶„ì„
if selected == "ğŸ“Š ê°€ì… ì—°ë„ ë¶„ì„":
    st.subheader("ğŸ“Š ê°€ì… ì—°ë„ì™€ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸")
    st.markdown("""
    ê°€ì…ì¼ ë°ì´í„°ë¥¼ ì´ìš©í•´ ì—°ë„ë¥¼ ì¶”ì¶œí•˜ë©´, ê° ì—°ë„ì— ëª‡ ëª…ì˜ ê³ ê°ì´ ìœ ì…ë˜ì—ˆëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ ê³ ê°ë“¤ì´ ì–´ë–¤ ìœ í˜•(ì˜ˆ: ì¼ë°˜, VIP, ì´íƒˆ ê°€ëŠ¥ ë“±)ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
    Xì¶•ì€ ê°€ì… ì—°ë„, Yì¶•ì€ í•´ë‹¹ ì—°ë„ì— ê°€ì…í•œ ê³ ê° ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, ê° ë§‰ëŒ€ëŠ” ê³ ê° ìœ í˜•ë³„ë¡œ ìƒ‰ìƒìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ ìˆì–´, ì—°ë„ë³„ ê³ ê° ìœ ì… íŒ¨í„´ê³¼ íŠ¹ì„±ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    """, unsafe_allow_html=True)
    if os.path.exists(csv_path):
        df = pd.read_csv(csv_path)
        if 'ê°€ì…ì¼' in df.columns and 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸' in df.columns:
            df['ê°€ì…ì¼'] = pd.to_datetime(df['ê°€ì…ì¼'], errors='coerce')
            df['ê°€ì… ì—°ë„'] = df['ê°€ì…ì¼'].dt.year
            df_grouped = df.groupby(['ê°€ì… ì—°ë„', 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸']).size().reset_index(name='ê³ ê° ìˆ˜')
            bar_fig = px.bar(
                df_grouped,
                x='ê°€ì… ì—°ë„',
                y='ê³ ê° ìˆ˜',
                color='ê³ ê° ì„¸ê·¸ë¨¼íŠ¸',
                title='ê°€ì… ì—°ë„ë³„ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ë³€í™”',
                labels={'ê°€ì… ì—°ë„': 'ì—°ë„', 'ê³ ê° ìˆ˜': 'ê°€ì… ê³ ê° ìˆ˜', 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸': 'ê³ ê° ìœ í˜•'},
                color_discrete_sequence=pastel_colors
            )
            bar_fig.update_layout(
                title={'text': 'ê°€ì… ì—°ë„ë³„ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ë³€í™”', 'x': 0.5, 'font': {'size': 20}},
                xaxis=dict(title='ê°€ì… ì—°ë„', tickformat='%Y'),
                yaxis=dict(title='ê°€ì… ê³ ê° ìˆ˜'),
                margin=dict(l=40, r=40, t=40, b=80),
                plot_bgcolor='#f4f4f9', paper_bgcolor='#ffffff', font=dict(size=12)
            )
            st.plotly_chart(bar_fig)
            custom_info(
                "<strong> ê·¸ë˜í”„ ì„¤ëª…:</strong><br> ì´ ê·¸ë˜í”„ëŠ” ê³ ê° ê°€ì… ì—°ë„ë³„ ìœ ì… ê³ ê° ìˆ˜ì™€ ìœ í˜•ì„ ì‹œê°í™”í•©ë‹ˆë‹¤. "
                "ê° ë§‰ëŒ€ëŠ” íŠ¹ì • ì—°ë„ì— ê°€ì…í•œ ê³ ê° ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, ìƒ‰ìƒì€ ê° ê³ ê°ì˜ ìœ í˜•ì„ êµ¬ë¶„í•˜ì—¬ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ì •ë³´ë¥¼ í†µí•´ íŠ¹ì • ì‹œê¸°ì— ë§ˆì¼€íŒ… ì „ëµì„ ê°•í™”í•  í•„ìš”ê°€ ìˆëŠ”ì§€ íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "#d1ecf1", "black"
            )
            total_customers = df_grouped['ê³ ê° ìˆ˜'].sum()
            if total_customers >= 2000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê³ ê°ìˆ˜ê°€ ë§¤ìš° ë§ìŠµë‹ˆë‹¤. â†’ ëŒ€ê·œëª¨ í• ì¸ í–‰ì‚¬, í”„ë¦¬ë¯¸ì—„ ë©¤ë²„ì‹­ ë¦¬ë‰´ì–¼, VIP ì „ìš© ê°œì¸í™” ì„œë¹„ìŠ¤ ê°•í™”.", "#d1e7dd", "darkgreen")
            elif total_customers >= 1500:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê³ ê°ìˆ˜ê°€ ì–‘í˜¸í•©ë‹ˆë‹¤. â†’ ì‹ ê·œ ê³ ê° í˜œíƒ ê°•í™”, ì¶”ì²œì¸ ë³´ìƒ í”„ë¡œê·¸ë¨ ë„ì… ë“±ì„ ê³ ë ¤í•˜ì„¸ìš”.", "#fff3cd", "darkorange")
            elif total_customers >= 1000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê³ ê°ìˆ˜ê°€ ë³´í†µì…ë‹ˆë‹¤. â†’ ì†Œê·œëª¨ ì´ë²¤íŠ¸ì™€ ì˜¨ë¼ì¸ í”„ë¡œëª¨ì…˜ì„ í†µí•œ ì¶”ê°€ ê³ ê° ìœ ì…ì„ ì´‰ì§„í•˜ì„¸ìš”.", "#f8d7da", "darkred")
            elif total_customers >= 500:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê³ ê°ìˆ˜ê°€ ë‚®ìŠµë‹ˆë‹¤. â†’ ì˜¨ë¼ì¸ ê´‘ê³ , SNS ë§ˆì¼€íŒ…, ì§€ì—­ ì´ë²¤íŠ¸ ë“±ì„ í†µí•´ ì‹ ê·œ ê³ ê° í™•ë³´ì— ì£¼ë ¥í•˜ì„¸ìš”.", "#f8d7da", "darkred")
            else:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê³ ê°ìˆ˜ê°€ ë§¤ìš° ì ìŠµë‹ˆë‹¤. â†’ ì „ë©´ì ì¸ ë§ˆì¼€íŒ… ì „ëµ ì¬ê²€í†  ë° ê³ ê° í”¼ë“œë°± ìˆ˜ì§‘ í›„ ê°œì„  ë°©ì•ˆì„ ë§ˆë ¨í•˜ì„¸ìš”.", "#f5c6cb", "darkred")
        else:
            st.error("í•„ìš”í•œ ì»¬ëŸ¼('ê°€ì…ì¼', 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸')ì´ CSV íŒŒì¼ì— ì—†ìŠµë‹ˆë‹¤.")
    else:
        st.error(f"âš ï¸ CSV íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: {csv_path}")

# 2) ê±°ë˜ ê¸ˆì•¡ ë¶„ì„
elif selected == "ğŸ’° ê±°ë˜ ê¸ˆì•¡ ë¶„ì„":
    st.subheader("ğŸ’° ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ê±°ë˜ ê¸ˆì•¡")
    st.markdown("""
    ì´ ë°•ìŠ¤í”Œë¡¯ì€ ê³ ê° ìœ í˜•ë³„ ê±°ë˜ ê¸ˆì•¡ì˜ ë¶„í¬ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. 
    ì¤‘ì•™ê°’, ì‚¬ë¶„ìœ„ ë²”ìœ„, ì´ìƒì¹˜ë¥¼ í†µí•´ ê° ê³ ê°êµ°ì˜ ì†Œë¹„ ì„±í–¥ê³¼ ì§€ì¶œ íŒ¨í„´ì„ ëª…í™•í•˜ê²Œ íŒŒì•…í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í”„ë¦¬ë¯¸ì—„ ì „ëµì´ë‚˜ í• ì¸ ì •ì±… ë“± ë§ˆì¼€íŒ… ì „ëµì„ ìˆ˜ë¦½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    """, unsafe_allow_html=True)
    if os.path.exists(csv_path):
        df = pd.read_csv(csv_path)
        if {'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸', 'ê±°ë˜ ê¸ˆì•¡'}.issubset(df.columns):
            box_fig = px.box(
                df,
                x="ê³ ê° ì„¸ê·¸ë¨¼íŠ¸",
                y="ê±°ë˜ ê¸ˆì•¡",
                title="ì„¸ê·¸ë¨¼íŠ¸ë³„ ê±°ë˜ ê¸ˆì•¡ ë¶„í¬",
                labels={'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸': 'ê³ ê° ìœ í˜•', 'ê±°ë˜ ê¸ˆì•¡': 'ê±°ë˜ ê¸ˆì•¡(ì›)'},
                color="ê³ ê° ì„¸ê·¸ë¨¼íŠ¸",
                color_discrete_sequence=pastel_colors
            )
            box_fig.update_layout(
                title={'text': 'ì„¸ê·¸ë¨¼íŠ¸ë³„ ê±°ë˜ ê¸ˆì•¡ ë¶„í¬', 'x': 0.5, 'font': {'size': 20}},
                xaxis=dict(title='ê³ ê° ìœ í˜•'),
                yaxis=dict(title='ê±°ë˜ ê¸ˆì•¡(ì›)'),
                margin=dict(l=40, r=40, t=40, b=80),
                plot_bgcolor='#f4f4f9', paper_bgcolor='#ffffff', font=dict(size=12)
            )
            st.plotly_chart(box_fig)
            custom_info(
                "<strong>ê·¸ë˜í”„ ì„¤ëª…:</strong><br> ë°•ìŠ¤í”Œë¡¯ì€ ê° ê³ ê° ìœ í˜•ì˜ ê±°ë˜ ê¸ˆì•¡ ì¤‘ì•™ê°’ê³¼ ë¶„í¬(ìƒì), ê·¸ë¦¬ê³  ì´ìƒì¹˜(ê°œë³„ ì )ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ ì •ë³´ë¥¼ í†µí•´ ì†Œë¹„ íŒ¨í„´ì„ ë¶„ì„í•˜ê³ , ê³ ê°€ ìƒí’ˆì´ë‚˜ í• ì¸ ì „ëµ ë“± ë§ˆì¼€íŒ… ë°©í–¥ì„ ê²°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "#d1ecf1", "black"
            )
            avg_transaction = df['ê±°ë˜ ê¸ˆì•¡'].mean()
            if avg_transaction >= 10000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. â†’ ì´ˆê³ ê°€ ìƒí’ˆ ë° ë§ì¶¤í˜• ì»¨ì‹œì–´ì§€ ì„œë¹„ìŠ¤, VIP ì „ë‹´ ì´ë²¤íŠ¸ ê°•í™”.", "#d1e7dd", "darkgreen")
            elif avg_transaction >= 8000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ë†’ìŠµë‹ˆë‹¤. â†’ í”„ë¦¬ë¯¸ì—„ ë©¤ë²„ì‹­ í™•ëŒ€, VIP íŠ¹ë³„ ì´ˆì²­ í–‰ì‚¬, ë§ì¶¤í˜• ìƒí’ˆ ì¶”ì²œ.", "#cce5ff", "darkblue")
            elif avg_transaction >= 5000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ì–‘í˜¸í•©ë‹ˆë‹¤. â†’ VIP ì¶”ê°€ í• ì¸ ë° ì—…ì…€ë§, ë§ì¶¤ ë§ˆì¼€íŒ… ì»¨ì„¤íŒ… ì œê³µ.", "#d4edda", "darkgreen")
            elif avg_transaction >= 3000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ë³´í†µ ì´ìƒì…ë‹ˆë‹¤. â†’ í• ì¸ ì¿ í°, í¬ì¸íŠ¸ ì ë¦½, ë‹¨ê³¨ ê³ ê° ì „ìš© ì´ë²¤íŠ¸ ì§„í–‰.", "#fff3cd", "darkorange")
            elif avg_transaction >= 2000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ë³´í†µì…ë‹ˆë‹¤. â†’ ì†Œì•¡ êµ¬ë§¤ ê³ ê° ëŒ€ìƒìœ¼ë¡œ ì—…ì…€ë§ ë° í¬ë¡œìŠ¤ì…€ë§ í”„ë¡œëª¨ì…˜ ì ìš©.", "#ffeeba", "darkorange")
            elif avg_transaction >= 1000:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ë‚®ìŠµë‹ˆë‹¤. â†’ ì¬êµ¬ë§¤ í• ì¸ ì¿ í°, ì ë¦½ ì´ë²¤íŠ¸, íƒ€ê²Ÿ ë§ˆì¼€íŒ…ì„ í†µí•œ ì¶©ì„±ë„ í–¥ìƒ.", "#f8d7da", "darkred")
            elif avg_transaction >= 500:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. â†’ ê°€ê²© ê²½ìŸë ¥ ê°•í™”, ì†Œì•¡ êµ¬ë§¤ í”„ë¡œëª¨ì…˜ ë° ì‹ ê·œ ê³ ê° í™•ë³´ ì „ëµ ì§‘ì¤‘.", "#f5c6cb", "darkred")
            else:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ê±°ë˜ ê¸ˆì•¡ì´ ê·¹íˆ ë‚®ìŠµë‹ˆë‹¤. â†’ ì „ë©´ì ì¸ ê°€ê²© ì •ì±… ì¬ê²€í†  ë° ë§ˆì¼€íŒ… ì „ëµ ì „í™˜ì´ í•„ìš”í•©ë‹ˆë‹¤.", "#f5c6cb", "darkred")
        else:
            st.error("í•„ìš”í•œ ì»¬ëŸ¼('ê³ ê° ì„¸ê·¸ë¨¼íŠ¸', 'ê±°ë˜ ê¸ˆì•¡')ì´ CSV íŒŒì¼ì— ì—†ìŠµë‹ˆë‹¤.")
    else:
        st.error(f"âš ï¸ CSV íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: {csv_path}")

# 3) êµ¬ë§¤ ë¹ˆë„ ë¶„ì„
elif selected == "ğŸ›’ êµ¬ë§¤ ë¹ˆë„ ë¶„ì„":
    st.subheader("ğŸ›’ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ êµ¬ë§¤ ë¹ˆë„")
    st.markdown("""
    ì´ ë°” ì°¨íŠ¸ëŠ” ê° ê³ ê° ìœ í˜•ë³„ í‰ê·  êµ¬ë§¤ íšŸìˆ˜ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤. 
    Xì¶•ì€ ê³ ê° ìœ í˜•, Yì¶•ì€ í•´ë‹¹ ê·¸ë£¹ì˜ í‰ê·  êµ¬ë§¤ íšŸìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, ì´ë¥¼ í†µí•´ ê³ ê°ì˜ ì¬êµ¬ë§¤ ì„±í–¥ ë° ì†Œë¹„ íŒ¨í„´ì„ ì‹¬ë„ ìˆê²Œ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    """, unsafe_allow_html=True)
    if os.path.exists(csv_path):
        df = pd.read_csv(csv_path)
        if {'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸', 'ì œí’ˆ êµ¬ë§¤ ë¹ˆë„'}.issubset(df.columns):
            freq_df = df.groupby('ê³ ê° ì„¸ê·¸ë¨¼íŠ¸')['ì œí’ˆ êµ¬ë§¤ ë¹ˆë„'].mean().reset_index()
            freq_df.rename(columns={'ì œí’ˆ êµ¬ë§¤ ë¹ˆë„': 'í‰ê·  êµ¬ë§¤ íšŸìˆ˜'}, inplace=True)
            bar_fig = px.bar(
                freq_df,
                x="ê³ ê° ì„¸ê·¸ë¨¼íŠ¸",
                y="í‰ê·  êµ¬ë§¤ íšŸìˆ˜",
                title="ì„¸ê·¸ë¨¼íŠ¸ë³„ í‰ê·  êµ¬ë§¤ ë¹ˆë„",
                labels={'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸': 'ê³ ê° ìœ í˜•', 'í‰ê·  êµ¬ë§¤ íšŸìˆ˜': 'í‰ê·  êµ¬ë§¤ íšŸìˆ˜'},
                color="ê³ ê° ì„¸ê·¸ë¨¼íŠ¸",
                color_discrete_sequence=pastel_colors
            )
            bar_fig.update_layout(
                title={'text': 'ì„¸ê·¸ë¨¼íŠ¸ë³„ í‰ê·  êµ¬ë§¤ ë¹ˆë„', 'x': 0.5, 'font': {'size': 20}},
                xaxis=dict(title='ê³ ê° ìœ í˜•'),
                yaxis=dict(title='í‰ê·  êµ¬ë§¤ íšŸìˆ˜'),
                margin=dict(l=40, r=40, t=40, b=80),
                plot_bgcolor='#f4f4f9', paper_bgcolor='#ffffff', font=dict(size=12)
            )
            st.plotly_chart(bar_fig)
            custom_info(
                "<strong> ê·¸ë˜í”„ ì„¤ëª…:</strong><br> ì´ ì°¨íŠ¸ëŠ” ê° ê³ ê° ìœ í˜•ë³„ í‰ê·  êµ¬ë§¤ íšŸìˆ˜ë¥¼ ë³´ì—¬ì£¼ì–´, ì¬êµ¬ë§¤ ê²½í–¥ê³¼ ì†Œë¹„ íŒ¨í„´ì„ íŒŒì•…í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê³ ê° ì¶©ì„±ë„ ê°•í™” ë° ì¬êµ¬ë§¤ ì´‰ì§„ ì „ëµì„ ìˆ˜ë¦½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "#d1ecf1", "black"
            )
            avg_purchase = freq_df['í‰ê·  êµ¬ë§¤ íšŸìˆ˜'].mean()
            if avg_purchase >= 10:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë¹ˆë„ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. â†’ VIP ë³´ìƒ í”„ë¡œê·¸ë¨, ë§ì¶¤ í• ì¸, ì „ë‹´ ì»¨ì„¤íŒ… ê°•í™”.", "#d1e7dd", "darkgreen")
            elif avg_purchase >= 8:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë¹ˆë„ê°€ ë†’ìŠµë‹ˆë‹¤. â†’ ê³ ê° ë³´ìƒ ì´ë²¤íŠ¸, ì¶”ê°€ í¬ì¸íŠ¸ ì ë¦½, ë§ì¶¤ ì¿ í° ì œê³µ ê³ ë ¤.", "#cce5ff", "darkblue")
            elif avg_purchase >= 5:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë¹ˆë„ê°€ ì–‘í˜¸í•©ë‹ˆë‹¤. â†’ ë‹¨ê³¨ ê³ ê° ì „í™˜ì„ ìœ„í•œ ë³´ìƒ í”„ë¡œê·¸ë¨ê³¼ ì—…ê·¸ë ˆì´ë“œ í˜œíƒ ì œê³µ.", "#d4edda", "darkgreen")
            elif avg_purchase >= 3:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë¹ˆë„ê°€ ë³´í†µì…ë‹ˆë‹¤. â†’ ì¬êµ¬ë§¤ í• ì¸, í¬ì¸íŠ¸ 2ë°° ì ë¦½ í–‰ì‚¬ ë“±ìœ¼ë¡œ êµ¬ë§¤ ì´‰ì§„ ì‹œë„.", "#fff3cd", "darkorange")
            elif avg_purchase >= 2:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë¹ˆë„ê°€ ë‚®ìŠµë‹ˆë‹¤. â†’ íƒ€ê²Ÿ ë§ˆì¼€íŒ…, ì¦‰ì‹œ êµ¬ë§¤ í˜œíƒ ì œê³µì„ í†µí•´ ì¬êµ¬ë§¤ ìœ ë„.", "#ffeeba", "darkorange")
            elif avg_purchase >= 1:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë¹ˆë„ê°€ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. â†’ ì‹ ê·œ ê³ ê° í™•ë³´ ë° ì¬êµ¬ë§¤ ì´‰ì§„ì„ ìœ„í•œ ê°•ë ¥í•œ í• ì¸ ë° í”„ë¡œëª¨ì…˜ ì „ëµ í•„ìš”.", "#f8d7da", "darkred")
            elif avg_purchase == 0:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë°ì´í„°ê°€ 0ì…ë‹ˆë‹¤. â†’ ë°ì´í„° ì ê²€ í›„, ì‹ ê·œ ì´ë²¤íŠ¸ ë° ì‹œìŠ¤í…œ ì˜¤ë¥˜ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.", "#f5c6cb", "darkred")
            else:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ë°ì´í„° ì˜¤ë¥˜ ë°œìƒ. â†’ ë°ì´í„° ì •í•©ì„± ì¬í™•ì¸ ë° ë§ˆì¼€íŒ… ì „ëµ ìˆ˜ì • í•„ìš”.", "#f5c6cb", "darkred")
        else:
            st.error("í•„ìš”í•œ ì»¬ëŸ¼('ê³ ê° ì„¸ê·¸ë¨¼íŠ¸', 'ì œí’ˆ êµ¬ë§¤ ë¹ˆë„')ì´ CSV íŒŒì¼ì— ì—†ìŠµë‹ˆë‹¤.")
    else:
        st.error(f"âš ï¸ CSV íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: {csv_path}")

# 4) í´ëŸ¬ìŠ¤í„°ë§ ë¶„ì„
elif selected == "ğŸ“ˆ í´ëŸ¬ìŠ¤í„°ë§ ë¶„ì„":
    st.subheader("ğŸ“ˆ í´ëŸ¬ìŠ¤í„°ë³„ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸")
    st.markdown("""
    ì•„ë˜ í‘œì™€ ê·¸ë˜í”„ëŠ” ê³ ê° ë°ì´í„°ë¥¼ í´ëŸ¬ìŠ¤í„°ë§ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ê·¸ë£¹í™”í•œ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. 
    ê° í´ëŸ¬ìŠ¤í„°ëŠ” í‰ê·  ì—°ë ¹, ê±°ë˜ ê¸ˆì•¡, ì¹œí™˜ê²½ì°¨ ì„ í˜¸ë„ ë“± ì£¼ìš” ì§€í‘œë¥¼ ì¢…í•©í•˜ì—¬ ê³ ê° íŠ¹ì„±ì„ ì§‘ì•½í•œ ê²°ê³¼ë¡œ, 
    ì´ë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„°ë³„ ê³ ê°ì˜ ì†Œë¹„ ì„±í–¥ê³¼ ì„ í˜¸ë„ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìœ¼ë©°, ë§ì¶¤í˜• ë§ˆì¼€íŒ… ë° ì°¨ëŸ‰ ì¶”ì²œ ì „ëµ ìˆ˜ë¦½ì— í™œìš©ë©ë‹ˆë‹¤.
    """, unsafe_allow_html=True)
    # í´ëŸ¬ìŠ¤í„° ìš”ì•½ ë°ì´í„° (ì¸ë±ìŠ¤ ì œê±°)
    cluster_data = {
        "ìœ í˜•": [1, 2, 3, 4, 5, 6, 7, 8],
        "í‰ê·  ì—°ë ¹ëŒ€": [34.65, 51.35, 60.00, 34.51, 38.55, 61.95, 33.52, 44.94],
        "ê±°ë˜ ê¸ˆì•¡": ["ë†’ìŒ", "ë†’ìŒ", "ì ìŒ", "ì ë‹¹", "ë‚®ìŒ", "ë‚®ìŒ", "ë‚®ìŒ", "ë§¤ìš° ë†’ìŒ"],
        "ì¹œí™˜ê²½ì°¨ ë¹„ìœ¨": ["13.04%", "9.30%", "0%", "20.51%", "39.39%", "13.95%", "0%", "100%"]
    }
    df_summary = pd.DataFrame(cluster_data)
    st.markdown(df_summary.to_html(index=False), unsafe_allow_html=True)
    
    if os.path.exists(csv_path):
        df = pd.read_csv(csv_path)
        if {'Cluster', 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸'}.issubset(df.columns):
            df_grouped = df.groupby(['Cluster', 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸']).size().reset_index(name='ê³ ê° ìˆ˜')
            bar_fig = px.bar(
                df_grouped,
                x='Cluster',
                y='ê³ ê° ìˆ˜',
                color='ê³ ê° ì„¸ê·¸ë¨¼íŠ¸',
                title='í´ëŸ¬ìŠ¤í„°ë³„ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ë¶„í¬',
                labels={'Cluster': 'í´ëŸ¬ìŠ¤í„°', 'ê³ ê° ìˆ˜': 'ê³ ê° ìˆ˜', 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸': 'ê³ ê° ìœ í˜•'},
                color_discrete_sequence=pastel_colors,
                barmode="stack"
            )
            bar_fig.update_layout(
                title={'text': 'í´ëŸ¬ìŠ¤í„°ë³„ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ë¶„í¬', 'x': 0.5, 'font': {'size': 20}},
                xaxis=dict(title='í´ëŸ¬ìŠ¤í„°'),
                yaxis=dict(title='ê³ ê° ìˆ˜'),
                margin=dict(l=40, r=40, t=40, b=80),
                plot_bgcolor='#f4f4f9', paper_bgcolor='#ffffff', font=dict(size=12)
            )
            st.plotly_chart(bar_fig)
            custom_info(
                "<strong>ê·¸ë˜í”„ ì„¤ëª…:</strong><br> ì´ ê·¸ë˜í”„ëŠ” ê³ ê° ë°ì´í„°ë¥¼ í´ëŸ¬ìŠ¤í„°ë³„ë¡œ ê·¸ë£¹í™”í•˜ì—¬, ê° í´ëŸ¬ìŠ¤í„° ë‚´ ê³ ê° ìœ í˜•ë³„ ë¶„í¬ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤. "
                "Xì¶•ì€ í´ëŸ¬ìŠ¤í„° ë²ˆí˜¸, Yì¶•ì€ í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ì˜ ê³ ê° ì´ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, ìƒ‰ìƒì€ ê³ ê° ìœ í˜•(ì˜ˆ: ì¼ë°˜, VIP, ì´íƒˆ ê°€ëŠ¥ ë“±)ì„ êµ¬ë¶„í•©ë‹ˆë‹¤. "
                "ì´ ì •ë³´ë¥¼ í†µí•´ ê° í´ëŸ¬ìŠ¤í„°ì˜ íŠ¹ì„±ì„ ëª…í™•íˆ íŒŒì•…í•˜ê³ , ë§ì¶¤í˜• ë§ˆì¼€íŒ… ì „ëµì„ ìˆ˜ë¦½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "#d1ecf1", "black"
            )
        else:
            st.error("í•„ìš”í•œ ì»¬ëŸ¼('Cluster', 'ê³ ê° ì„¸ê·¸ë¨¼íŠ¸')ì´ CSV íŒŒì¼ì— ì—†ìŠµë‹ˆë‹¤.")
    else:
        st.error(f"âš ï¸ CSV íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: {csv_path}")

# 5) ì§€ì—­ë³„ êµ¬ë§¤ ë¶„ì„
elif selected == "ğŸŒ ì§€ì—­ë³„ êµ¬ë§¤ ë¶„ì„":
    st.subheader("ğŸŒ ì§€ì—­ë³„ êµ¬ë§¤í•œ ì œí’ˆ ìˆ˜")
    st.markdown("""
    ì´ ë¶„ì„ì€ ê° ì§€ì—­ë³„ ê³ ê°ì´ êµ¬ë§¤í•œ ì œí’ˆì˜ ì´ 'êµ¬ë§¤ ê±´ìˆ˜'ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤.
    Xì¶•ì€ ì§€ì—­, Yì¶•ì€ í•´ë‹¹ ì§€ì—­ì˜ ì´ êµ¬ë§¤ ê±´ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, ë§‰ëŒ€ì˜ ìƒ‰ìƒì€ ì§€ì—­ë³„ íŒë§¤ëœ ì œí’ˆêµ°ì„ êµ¬ë¶„í•©ë‹ˆë‹¤.
    ë˜í•œ, íŒŒì´ì°¨íŠ¸ë¥¼ í†µí•´ ì„ íƒí•œ ì§€ì—­ ë‚´ ê° ì œí’ˆì˜ êµ¬ë§¤ ë¹„ìœ¨ì„ ìƒì„¸íˆ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    """, unsafe_allow_html=True)
    if os.path.exists(csv_path):
        df = pd.read_csv(csv_path)
        if {'ì‹œêµ¬', 'êµ¬ë§¤í•œ ì œí’ˆ', 'ì œí’ˆ êµ¬ë§¤ ë¹ˆë„'}.issubset(df.columns):
            df = df.copy()
            df.rename(columns={'ì œí’ˆ êµ¬ë§¤ ë¹ˆë„': 'êµ¬ë§¤ ê±´ìˆ˜'}, inplace=True)
            purchase_count_by_region = df.groupby(['ì‹œêµ¬', 'êµ¬ë§¤í•œ ì œí’ˆ'])['êµ¬ë§¤ ê±´ìˆ˜'].sum().reset_index()
            bar_fig = px.bar(
                purchase_count_by_region, 
                x='ì‹œêµ¬', 
                y='êµ¬ë§¤ ê±´ìˆ˜', 
                color='êµ¬ë§¤í•œ ì œí’ˆ', 
                title='ì§€ì—­ë³„ êµ¬ë§¤ ì œí’ˆ ê±´ìˆ˜',
                labels={'ì‹œêµ¬': 'ì§€ì—­', 'êµ¬ë§¤ ê±´ìˆ˜': 'ì´ êµ¬ë§¤ ê±´ìˆ˜', 'êµ¬ë§¤í•œ ì œí’ˆ': 'ì œí’ˆ'},
                color_discrete_sequence=pastel_colors
            )
            bar_fig.update_layout(
                title={'text': 'ì§€ì—­ë³„ êµ¬ë§¤ ì œí’ˆ ê±´ìˆ˜', 'x': 0.5, 'font': {'size': 20}},
                xaxis=dict(title='ì§€ì—­', tickangle=45),
                yaxis=dict(title='ì´ êµ¬ë§¤ ê±´ìˆ˜'),
                margin=dict(l=40, r=40, t=40, b=80),
                plot_bgcolor='#f4f4f9', paper_bgcolor='#ffffff', font=dict(size=12),
                showlegend=True
            )
            st.plotly_chart(bar_fig)
            custom_info(
                "<strong> ê·¸ë˜í”„ ì„¤ëª…:</strong><br> Xì¶•ì€ ê° ì§€ì—­(ì˜ˆ: ì„œìš¸, ë¶€ì‚° ë“±), Yì¶•ì€ í•´ë‹¹ ì§€ì—­ì˜ ì´ êµ¬ë§¤ ê±´ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë©°, "
                "ë§‰ëŒ€ì˜ ìƒ‰ìƒì€ ê° ì§€ì—­ì—ì„œ íŒë§¤ëœ ì œí’ˆêµ°ì„ êµ¬ë¶„í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì§€ì—­ë³„ ê³ ê° ì„ í˜¸ë„ì™€ êµ¬ë§¤ íŒ¨í„´ì„ ì‹¬ë„ ìˆê²Œ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                "#d1ecf1", "black"
            )
            region_selected = st.selectbox("ì§€ì—­ ì„ íƒ", df['ì‹œêµ¬'].unique())
            region_data = df[df['ì‹œêµ¬'] == region_selected]
            product_count_by_region = region_data.groupby('êµ¬ë§¤í•œ ì œí’ˆ')['êµ¬ë§¤ ê±´ìˆ˜'].sum().reset_index()
            pie_chart_fig = px.pie(
                product_count_by_region,
                names='êµ¬ë§¤í•œ ì œí’ˆ',
                values='êµ¬ë§¤ ê±´ìˆ˜',
                title=f"{region_selected} ì§€ì—­ì˜ ì œí’ˆ êµ¬ë§¤ ë¹„ìœ¨",
                color_discrete_sequence=pastel_colors
            )
            st.plotly_chart(pie_chart_fig)
            custom_info(
                f"<strong> íŒŒì´ì°¨íŠ¸ ì„¤ëª…:</strong><br> íŒŒì´ì°¨íŠ¸ëŠ” {region_selected} ì§€ì—­ ë‚´ ê° ì œí’ˆì˜ êµ¬ë§¤ ê±´ìˆ˜ ë¹„ìœ¨ì„ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•˜ì—¬, "
                "ì¸ê¸° ì œí’ˆê³¼ ë§ˆì¼€íŒ… í¬ì¸íŠ¸ë¥¼ ëª…í™•í•˜ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.",
                "#d1ecf1", "black"
            )
            total_region = product_count_by_region['êµ¬ë§¤ ê±´ìˆ˜'].sum()
            if total_region >= 150:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: í•´ë‹¹ ì§€ì—­ì˜ êµ¬ë§¤ ê±´ìˆ˜ê°€ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. â†’ ëŒ€í˜• ì´ë²¤íŠ¸, ì§€ì—­ ë§ì¶¤ í”Œë˜ê·¸ì‹­ ìŠ¤í† ì–´ ìš´ì˜, ì‹œìŠ¹í–‰ì‚¬ ë“± ê°•ë ¥í•œ ì˜¤í”„ë¼ì¸ ë§ˆì¼€íŒ… ì „ëµì„ ì¶”ì§„í•˜ì„¸ìš”.",
                           "#d1e7dd", "darkgreen")
            elif total_region >= 120:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ë†’ìŠµë‹ˆë‹¤. â†’ ì§€ì—­ í˜ìŠ¤í‹°ë²Œ, ì‹œìŠ¹í–‰ì‚¬, íŠ¹ë³„ í• ì¸ ë° VIP í˜œíƒ í™•ëŒ€ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.",
                           "#cce5ff", "darkblue")
            elif total_region >= 100:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ì–‘í˜¸í•©ë‹ˆë‹¤. â†’ ì§€ì—­ ë§ì¶¤ í• ì¸ ì¿ í°, ë©¤ë²„ì‹­ ì´ë²¤íŠ¸, ê³ ê° ë¦¬ì›Œë“œ í”„ë¡œê·¸ë¨ ë“±ì„ í†µí•´ ì¶”ê°€ ë§¤ì¶œ ì¦ëŒ€ë¥¼ ë„ëª¨í•˜ì„¸ìš”.",
                           "#d4edda", "darkgreen")
            elif total_region >= 80:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ë³´í†µ ì´ìƒì…ë‹ˆë‹¤. â†’ ì˜¤í”„ë¼ì¸ ì²´í—˜ í–‰ì‚¬, ì§€ì—­ ê´‘ê³  ë° SNS ë§ˆì¼€íŒ… ê°•í™”ë¡œ ë¸Œëœë“œ ì¸ì§€ë„ ìƒìŠ¹ì„ ë…¸ë ¤ë³´ì„¸ìš”.",
                           "#fff3cd", "darkorange")
            elif total_region >= 60:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ë³´í†µì…ë‹ˆë‹¤. â†’ ì†Œê·œëª¨ ì´ë²¤íŠ¸, ì˜¨ë¼ì¸ ë§ˆì¼€íŒ…, ê³ ê° í”¼ë“œë°± ê¸°ë°˜ í”„ë¡œëª¨ì…˜ ì „ëµì„ ì ìš©í•˜ì„¸ìš”.",
                           "#ffeeba", "darkorange")
            elif total_region >= 40:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ë‹¤ì†Œ ë‚®ìŠµë‹ˆë‹¤. â†’ íƒ€ê²Ÿ ë§ˆì¼€íŒ…, ì§€ì—­ ë§ì¶¤ í• ì¸, í˜„ì§€ ë”œëŸ¬ í˜‘ì—…ì„ í†µí•´ êµ¬ë§¤ í™œì„±í™”ë¥¼ ë„ëª¨í•˜ì„¸ìš”.",
                           "#f8d7da", "darkred")
            elif total_region >= 20:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ë‚®ìŠµë‹ˆë‹¤. â†’ ì§‘ì¤‘ ì˜¨ë¼ì¸ ê´‘ê³ , ì‹ ê·œ ê³ ê° í”„ë¡œëª¨ì…˜, í˜„ì§€ ì‹œì¥ ì¬ë¶„ì„ì„ í†µí•œ ì „ëµ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.",
                           "#f5c6cb", "darkred")
            elif total_region >= 10:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ë§¤ìš° ë‚®ìŠµë‹ˆë‹¤. â†’ ì‹ ê·œ ì‹œì¥ í…ŒìŠ¤íŠ¸, ê°•ë ¥í•œ ì˜¨ë¼ì¸ ìº í˜ì¸, í”„ë¡œëª¨ì…˜ ì¬ì„¤ê³„ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.",
                           "#f5c6cb", "darkred")
            elif total_region >= 1:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: êµ¬ë§¤ ê±´ìˆ˜ê°€ ê·¹íˆ ì ìŠµë‹ˆë‹¤. â†’ ì „ë©´ì ì¸ ì‹œì¥ ì¬ë¶„ì„ í›„, ì§‘ì¤‘ íƒ€ê²Ÿ ë§ˆì¼€íŒ… ë° ì‹ ê·œ ì „ëµ ìˆ˜ë¦½ì´ í•„ìˆ˜ì ì…ë‹ˆë‹¤.",
                           "#f5c6cb", "darkred")
            else:
                custom_info("í”„ë¡œëª¨ì…˜ ì œì•ˆ: ì´ ì§€ì—­ì—ì„œëŠ” êµ¬ë§¤ê°€ ì „í˜€ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. â†’ ì „ëµì  ì² ìˆ˜ ë˜ëŠ” ì‹ ê·œ ì‹œì¥ ê°œì²™ì„ ì‹ ì¤‘íˆ ê²€í† í•˜ì„¸ìš”.",
                           "#f5c6cb", "darkred")
            st.markdown(
                """
                ---<br>
                <strong>ì¶”ê°€ ì„¤ëª…:</strong><br>
                - ë°ì´í„°ëŠ” ì‹¤ì œ ìƒí™©ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë©°, ì§€ì—­ë³„ íŠ¹ì„±ì— ë”°ë¼ ë§ˆì¼€íŒ… íš¨ê³¼ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤.<br>
                - ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ì™€ A/B í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ìµœì ì˜ ë§ˆì¼€íŒ… ì „ëµì„ ë„ì¶œí•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
                """, unsafe_allow_html=True
            )
        else:
            st.error("í•„ìš”í•œ ì»¬ëŸ¼('ì‹œêµ¬', 'êµ¬ë§¤í•œ ì œí’ˆ', 'ì œí’ˆ êµ¬ë§¤ ë¹ˆë„')ì´ CSV íŒŒì¼ì— ì—†ìŠµë‹ˆë‹¤.")
    else:
        st.error(f"âš ï¸ CSV íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: {csv_path}")

